{% extends 'qa/template.html' %}

{% block content %}
    <div class='container-fluid ml-3'>
        
        <div class='row'>
            <p style='font-weight:bold'>Poste sua pergunta:</p>
        </div>
        <div class='row'>
            <div class='col-2 col-sm-2 col-md-2 col-lg-1'>
                <div class='row mt-2'>Pergunta:</div>
            </div>

            <div class='col-3 col-sm-3 col-md-3 col-lg-3'>
                <div class='row'>

                    <form action='{% url "qa:postar_pergunta" %}' method='post'>
                        {% csrf_token %}
                        <div class='row'>
                                <label>
                                    <input type='text' name='texto' value='{{texto}}' required style='width:50vw; height:10vh'/>
                                </label>
                            </div>
                        <div class='row mt-2'>
                            <input id='perguntaSubmit' type='submit' value='Postar Pergunta'/>
                        </div>
                        <script>
                            if('{{usuario}}' === ''){
                                $('#perguntaSubmit').addClass('disabled');
                            }
                            $('#perguntaSubmit').click(function(e){
                                if( $(this).hasClass('disabled') ){
                                    e.preventDefault();
                                    alert('Precisa Estar logado');
                                }
                            });
                        </script>
                    </form>

                </div>
            </div>
        </div>
    </div>
    {% if msg %}
        <script>
            function closeAlertBox(){
            alertBox = document.getElementById("alertBox");
            alertClose = document.getElementById("alertClose");
            alertBox.style.visibility = "hidden";
            alertClose.style.visibility = "hidden";
        }
        window.alert = function(msg){
            var id = "alertBox", alertBox, closeId = "alertClose", alertClose;
            alertBox = document.createElement("div");
            document.body.appendChild(alertBox);
            alertBox.id = id;
            alertBox.innerHTML = msg;
            alertClose = document.createElement("div");
            alertClose.id = closeId;
            alertClose.innerHTML = "x";
            alertBox.appendChild(alertClose);
            alertBox.style.visibility = "visible";
            alertClose.style.visibility = "visible";
            alertClose.onclick = closeAlertBox;
        };
        alert('{{msg}}')
        </script>
    {% endif %}
{% endblock %}

