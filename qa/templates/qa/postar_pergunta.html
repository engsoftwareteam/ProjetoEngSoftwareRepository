{% extends 'qa/template.html' %}

{% block content %}
    <div class='container-fluid ml-4 mt-2'>
        <div class='row ml-0'>
            <h4>Poste sua pergunta</h4>
        </div>
        <div class='row ml-0'>
            <div class='col-4 px-0'>
                <form action='{% url "qa:postar_pergunta" %}' method='post'>
                    {% csrf_token %}
                    <div class="form-group mb-0">
                        <textarea class="form-control col-12" rows="10" name='texto' required></textarea>
                    </div>
                    <div class='row mt-2 mx-auto justify-content-end'>
                        <input id='perguntaSubmit' type='submit' value='Postar Pergunta' class='btn bg-success px-5 text-light'/>
                    </div>
                    <script>
                        if('{{usuario}}' === ''){
                            $('#perguntaSubmit').addClass('disabled');
                        }
                        $('#perguntaSubmit').click(function(e){
                            if( $(this).hasClass('disabled') ){
                                e.preventDefault();
                                alert('Precisa Estar logado');
                            }
                        });
                    </script>
                </form>
            </div>
        </div>
    </div>
    {% if msg %}
        <script>
            function closeAlertBox(){
            alertBox = document.getElementById("alertBox");
            alertClose = document.getElementById("alertClose");
            alertBox.style.visibility = "hidden";
            alertClose.style.visibility = "hidden";
        }
        window.alert = function(msg){
            var id = "alertBox", alertBox, closeId = "alertClose", alertClose;
            alertBox = document.createElement("div");
            document.body.appendChild(alertBox);
            alertBox.id = id;
            alertBox.innerHTML = msg;
            alertClose = document.createElement("div");
            alertClose.id = closeId;
            alertClose.innerHTML = "x";
            alertBox.appendChild(alertClose);
            alertBox.style.visibility = "visible";
            alertClose.style.visibility = "visible";
            alertClose.onclick = closeAlertBox;
        };
        alert('{{msg}}')
        </script>
    {% endif %}
{% endblock %}

